; PROGRAM TO BLINK LED AT THE SPEED OF 0.47 SECOND USING TIMER INTERRUPT

ORG 0000H ;INITIAL CODE MEMORY
LJMP MAIN 	;JUMP TO MAIN FUNCTION

ORG 000BH	;ISR FOR TIMER0
LJMP ISR_TMR	;JUMP TO ISR_TMR FOR INTERRUPT SERVICE ROUTINE

ORG 0040H
MAIN:        MOV TMOD,#0X01	;TIMER 0, MODE 1
	  MOV TH0,#0X56	;HIGHER BIT
	  MOV TL0,#0XCA	;LOWER BIT
	  MOV IE,#0X82	;ENABLE TIMER INTERRUPT
	  SETB TR0 	;START TIMER
	  MOV B,#10	;SET REGISTER B TO 5 FOR LOOP
HERE: AJMP HERE

ISR_TMR:  CPL P1.2	;TOGGLE UNUSED PIN
	   MOV TH0,#0X56	;REINITIALIZE TIMER
	   MOV TL0,#0XCA     
	   DJNZ B,LOOP	;DECREMENT B AND WAIT UNTIL B IS CLEAR
	   MOV B,#10	;SET REGISTER B TO 5
	   CPL P1.0	;TOGGLE LED
	   CPL P1.2	;TOGGLE UNUSED PIN
	   RETI

LOOP:     CLR TF0
	  RETI
	  
